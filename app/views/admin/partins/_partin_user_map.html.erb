<h4 style="text-align:center; font-size: 14px; color: #888;">浏览分布</h4>
<div id="view_map" style="width: 100%; height: 600px;"></div>

<h4 style="text-align:center; margin-top: 30px; font-size: 14px; color: #888;">参与分布</h4>
<div id="earn_map" style="width: 100%; height: 600px;"></div>

<script charset="utf-8" src="http://map.qq.com/api/js?v=2.exp"></script>

<script>
window.onload = function() {
  //初始化地图函数  自定义函数名init
      function init1() {
          //定义map变量 调用 qq.maps.Map() 构造函数   获取地图显示容器
           var map1 = new qq.maps.Map(document.getElementById("view_map"), {
              center: new qq.maps.LatLng(30.670470,104.074390),      // 地图的中心地理坐标。
              zoom:8                                                 // 地图的中心地理坐标。
          });
          
          var anchor = new qq.maps.Point(6, 12),
                  size = new qq.maps.Size(14, 25),
                  origin = new qq.maps.Point(0, 0),
                  icon = new qq.maps.MarkerImage('<%= CommonConfig.map_anchor_image %>', size, origin, anchor);
          
          <%
            view_locations.each do |loc|
          %>
          
          var marker = new qq.maps.Marker({
              position: new qq.maps.LatLng('<%= loc.y %>','<%= loc.x %>'),
              map: map1,
              icon: icon,
          });
          
          <% end %>
      }

      //调用初始化函数地图
      init1();
      
      function init2() {
          //定义map变量 调用 qq.maps.Map() 构造函数   获取地图显示容器
           var map2 = new qq.maps.Map(document.getElementById("earn_map"), {
              center: new qq.maps.LatLng(30.670470,104.074390),      // 地图的中心地理坐标。
              zoom:8                                                 // 地图的中心地理坐标。
          });
          
          var anchor = new qq.maps.Point(6, 12),
                  size = new qq.maps.Size(14, 25),
                  origin = new qq.maps.Point(0, 0),
                  icon = new qq.maps.MarkerImage('<%= CommonConfig.map_anchor_image %>', size, origin, anchor);
          
          <%
            earn_locations.each do |loc|
          %>
          
          var marker = new qq.maps.Marker({
              position: new qq.maps.LatLng('<%= loc.y %>','<%= loc.x %>'),
              map: map2,
              icon: icon,
          });
          
          <% end %>
      }

      //调用初始化函数地图
      init2();
}
</script>